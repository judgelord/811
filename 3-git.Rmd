---
title: "Reproducable & collaborative research with git"
author: "Devin Judge-Lord"
date: 
output: 
  html_document:
  toc: true
---

```{r setup, include=FALSE}
## Sets defaults for R chunks
knitr::opts_chunk$set(echo = TRUE, # echo = TRUE means that your code will show
                      warning=FALSE,
                      message=FALSE,
                      # fig.path='Figs/', ## where to save figures
                      fig.height = 3,
                      fig.width = 3,
                      fig.align = 'center')

## Add any R packages you require. 
## Here are some we will use in 811:
requires <- c("tidyverse", # tidyverse includes dplyr and ggplot2
              "magrittr",
              "foreign",
              "readstata13",
              "here")

## Install any you don't have
to_install <- c(requires %in% rownames(installed.packages()) == FALSE)
install.packages(c(requires[to_install], "NA"), repos = "https://cloud.r-project.org/" )

## Load all required R packages
library(tidyverse)
library(ggplot2); theme_set(theme_bw())
library(magrittr)
library(here)
```
![](Figs/git-fire.png)

## Keep everything in one folder. Why?
- Portability
- Replication
- Transparency

--

## Track version history
- Restore code that breaks
- See what you or others did (e.g. why did our results change?!?)

---

## Collaborating (even with non-git users)

#### With git users 
- Line-by-line merging/diff (code and writing)

#### With non-users 
- Share document URLs (Word, LaTeX, whatever)
- Merge in their changes (LaTeX)
- Share HTML project updates (summary stats, draft figures, to-do lists)
- Share data

---

## Repositories == Project folders

### + Subfolders
#### /data
#### /figs
#### /functions
#### /scratchpad

**Tip:** Use `source(setup.R)` in all scripts, where `setup.R` is a script that loads the packages and functions used in your project.

---

## Finding things
- `here()` makes valid file paths: [Ode to the here() package](https://github.com/jennybc/here_here) 

```{r here}
## This works wherever this file is saved in the project folder
d <- readstata13::read.dta13(here("data/EX1.dta"))
```

**NEVER** use `setwd()` or user-specific file paths (e.g. `"C:\Users\path\that\only\I\have"`)!

---

## Naming things!

**NEVER** name files untitled.R, data.csv, ProblemSet.Rmd, Rplot.png!

<img style="float: center;" src="Figs/naming-animals.png">

--- 

## Basics 

### To get started
- `git clone repositiory.url` (or, in RStudio, File -> New Project -> Verstion Congtol -> Git)
- `git config --global user.name "yourGitHubUserName"` 
- `git config --global user.email "yourEmail@email.com` (these do need to be done in the terminal/consol)

--

## To do frequently
- `git commit` - confirm your changes
- `git pull` - merge in others' changes
- `git push` - update online repository

![](https://imgs.xkcd.com/comics/git_commit.png)


---

## Avoid
- Usless commit messages
- Committing files > 100MB

---

## Troubleshooting
- `git checkout` - restore a file from the online repo.
- `git reset` - read up on this before you do it! 


![](https://imgs.xkcd.com/comics/git.png)


---

## [GitHub](https://GitHub.com)
### Easily build a website
- Repository -> Settings -> GitHub Pages

### [GitHub pro is free for students](https://education.github.com/pack)
- unlimited collaborators on private repositories
